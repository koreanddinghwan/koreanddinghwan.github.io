---
title: "minitalk(2)"
excerpt: "Small data exchange program using UNIX signals"

categories:
  - minitalk
tags:
  - 42seoul

toc: true
toc_sticky: true

date: 2022-05-14
last_modified_at: 2022-05-14
---

<br><br>

minitalk 과제는 signal에 대한 공부도 필수이지만, 가장 핵심은 `운영체제`에 대한 기본 지식을 공부해야한다는 것이다.

signal에 대해 공부하다보면, interrupt에 대해 알게되고, kernel, process 등의 키워드들을 알게된다.  
이 키워드들을 듣고 그냥 `아 이런거구나`하고 넘어가면 안될 것 같아서 따로 운영체제 공부를 시작했다.

막상 운영체제 공부를 시작하고 보니, 운영체제 과목 자체가 프로세스 -> 쓰레드 이 순서로 다루고 있어서  
앞으로 과제할 때 큰 도움이 될 것 같아서 계속 강의를 들으며 공부하고 있다.

<br><br>

[주니온TV 아무거나 연구소](https://www.youtube.com/channel/UCOcPzXDWSrnaKXse9XOPiog)    
공룡책 ppt로 강의를 진행하시며, 운영체제의 핵심내용을 다루고 있고, 강의도 크게 많지 않아서 추천한다.  
물론, 과제해결이 목적이 아니라 깊은 공부를 목적으로 한다면 공룡책을 따로 사서 공부해야한다.  
난 다음학기에 학교를 복학해서 강의를 수강할 예정이기에 과제를 진행하며 큰 주제들에 대해 알고가고자 이 강의를 보고있다.  
minitalk 과제에서는 프로세스의 개념에 대해서 이해하면 된다.  
따라서, 여기선 기본적인 OS구조와 프로세스의 개념에 대해 정리한다.

## 기본적인 운영체제 구조

### 운영체제란

  - 컴퓨터의 하드웨어를 관리하는 소프트웨어
  - 프로그램이 구동될 수 있도록 환경을 제공하는 소프트웨어
  - 사용자와 하드웨어 사이에서 작동한다.
  - 컴퓨터에서 항상 구동된다.
  - 컴퓨터를 킨다 -> 하드디스크의 OS를 커널이 메모리에 올려준다.
  - 프로세스, 자원, UI 등을 총괄한다.
    <br>

### 운영체제의 정의

  - 일반적인 정의는 컴퓨터에서 항상 구동되는 한 프로그램
  - 일반적으로 kernel이라고 불린다.
  - 커널은 2개의 프로그램 타입을 나누게된다.

  1.  시스템 프로그램
  2.  어플리케이션 프로그램
      <br>

### 전통적인 컴퓨터 시스템

  1.  1개이상의 CPU
  2.  bus로 연결된 장치 컨트롤러
      - bus는 구성요소와 공유 메모리 사이에서 접근을 제공한다.
        ![스크린샷 2022-05-14 오전 1 46 09](https://user-images.githubusercontent.com/76278794/168329856-c9743baf-18e6-411a-bdd9-b7f9ceb9db88.png)
        <br>

### 폰 노이만 아키텍처에서 컴퓨터 시스템

  - ALU : Arithmetic Logic Unit
  - 레지스터 : program counter, instruction register, data register 등등
    ![스크린샷 2022-05-14 오전 1 48 49](https://user-images.githubusercontent.com/76278794/168330912-960e2bdd-a80d-4322-bd63-264745ae9eff.png)
  - IR에 add라는 명령어가 있고, data register에 3, 4가 저장되어있으면 이를 ALU가 연산해서 memory에 저장한다.
    <br>

### 일반적인 명렁 - 실행 싸이클
  1.  메모리에 명령을 fetch
      - instruction register에 명령어가 저장된다.
  2.  명령어가 decoded
      - 메모리로부터 연산자를 가져오거나, 다른 레지스터에 저장된다.
  3.  연산수행 후, 메모리에 stored
      <br>
### bootstrap 프로그램

  - 컴퓨터 전원이 들어오면 가장 먼저 실행되는 프로그램, OS를 메모리에 올린다.
    ![스크린샷 2022-05-14 오전 2 38 25](https://user-images.githubusercontent.com/76278794/168338043-98f40a69-7e5a-442b-8b0d-0e8220e0617e.png)
    <br>

### I/O, interrupts

  - 하드웨어가 언제든지 interrupt를 발생시킬 수 있다.(키보드, 마우스 등)
  - bus를 통해 CPU에게 전달한다.
    ![스크린샷 2022-05-14 오전 2 56 11](https://user-images.githubusercontent.com/76278794/168340672-dd3a1365-1d2a-460d-956f-799d7c8bc395.png)

  1.  장치에서 interrupt가 발생하면, bus를 통해 CPU에게 전송된다.
  2.  전송이 완료되면 interrupt가 CPU에게 signal되고, CPU가 interrupt를 핸들링한다.
      <br>

### 저장장치 구조(스토리지 구조)

  - 스토리지 시스템은 접근시간, 용량에 따라 나뉘게된다.
    ![스크린샷 2022-05-14 오전 3 00 10](https://user-images.githubusercontent.com/76278794/168341241-a94ae263-671f-4d39-9a4c-0809d46964c1.png)
    <br>

### I/O 구조 

- DMA(direct memory access)는 CPU를 거치지 않고 장치가 memory에 직접 접근하는 것을 의미. - 유튜브를 볼 때, network device가 전송한 데이터를 display device에 직접 전송.
  <img width="457" alt="스크린샷 2022-05-14 오전 3 03 13" src="https://user-images.githubusercontent.com/76278794/168341639-19203520-153e-462b-919d-e14ffa88027b.png">
  <br>

### 컴퓨터 시스템 구성요소 정의

  - CPU : 명령을 실행하는 하드웨어
  - 프로세서 : 1개 이상의 CPU를 가진 물리적 칩
  - 코어 : CPU의 기본 연산단위
  - 멀티코어 : 1개의 CPU안에 회로로 코어를 연결함
    - 칩 하나에 여러개의 코어가 달려있는 것.
    - on-chip communication을 하므로 더 빠르다.
      ![스크린샷 2022-05-14 오전 3 13 37](https://user-images.githubusercontent.com/76278794/168343038-e6021b15-a8f4-4b24-bb5a-a0a56163ce4a.png)

  - multiprocessor : 복수의 프로세서가 존재하는 것
    - 메모리에 연결된 각 CPU가 각각의 레지스터와 캐쉬를 가지고 작업한다.
    - 슈퍼컴퓨터는 이런 구조로 수많은 CPU를 가지고있음.
      ![스크린샷 2022-05-14 오전 3 09 51](https://user-images.githubusercontent.com/76278794/168342528-817503bc-044a-439f-9e93-f6467c282b5d.png)

  - mulitprogramming
    - 운영체제가 많은 프로세스들을 동시에 메모리에 올린다.
    - 하나 이상의 프로그램이 구동되고 있음.
    - CPU 사용효율을 높일 수 있다.
      ![스크린샷 2022-05-14 오전 3 17 23](https://user-images.githubusercontent.com/76278794/168343562-d42217a5-8bfc-4306-a32b-f59b036cf1c1.png)
      
  - multitasking(multiprocessing == multithreading)
    - 멀티프로그래밍과 함께 생각해야한다.
    - CPU가 각 작업을 빠르게 전환한다.
    - 사용자는 각 작업이 동시에 작동하는 것처럼 인식할 수 있다.
    - 시스템은 어떤 프로세스를 다음에 작동할 지 결정해야하는데, 여기서 `CPU 스케쥴링`의 개념이 등장한다.

<br>

### operation mode
  - user mode : application 동작 관리.
  - kernel mode : 운영체제 동작 관리
  - 안정적이지 않은 프로그램이 시스템에 직접적으로 악영향을 주거나, 다른 프로그램에 악영향을 주지 않게 하기위함
  ![스크린샷 2022-05-14 오전 3 30 37](https://user-images.githubusercontent.com/76278794/168345408-166a8826-ea1f-421d-8792-29d3d0bc651d.png)

<br>

### Virtualization
  - 한 컴퓨터의 하드웨어를 각각의 다른 실행환경으로 추상화할 수 있게한다.
  - VM : Virtual Machine
    - 운영체제 안에서 다른 운영체제를 어플리케이션처럼 사용할 수 있게해준다.
  - VMM : Virtual Machine Manager
    - VMware, XEN, WSL 등등....
  ![스크린샷 2022-05-14 오전 3 35 14](https://user-images.githubusercontent.com/76278794/168346020-058d080c-8b81-418f-a68c-d0aa34458317.png)

<br>

### Computing envirnments
  - traditional computing
  - mobile computing
    - 안드로이드, ios
  - Client-Server Computing
    - 웹
    - 서버는 client가 보낸 request들을 처리함
    ![스크린샷 2022-05-14 오전 3 52 17](https://user-images.githubusercontent.com/76278794/168350913-56382f00-9676-48b5-b1c2-a32d768e7f9b.png)

  - Peer-to-Peer Computing
    - 음악파일공유, 토렌트
    - 시스템 내의 각 노드들은 peer로 간주되고, 
    - 각각이 client이자 server의 역할을 한다.
    ![스크린샷 2022-05-14 오전 3 53 57](https://user-images.githubusercontent.com/76278794/168353991-85c5a844-05b0-48ec-a965-8ec032507b4a.png)

  - Cloud Computing
    - AWS, Azure, 등
    - computing 자원은 cloud server에 있고, 유저는 클라우드가 제공하는 서비스를 사용한다.
    <img width="589" alt="스크린샷 2022-05-14 오전 3 55 15" src="https://user-images.githubusercontent.com/76278794/168356390-32eda942-4ec6-49a0-9843-6578f89d37c4.png">
  - Real-Time Embedded Systems
    - 화성탐사
<br>

### OS interfaces
  - CLI : command line interface
    - shell(zsh, csh, bash, ...)
  - GUI : graphical user interface
    - Windows, MacOsS, GNOME, ...
  - Touch screen
    - Android UI, iphone UI ..

    <br>

### System calls
  - OS가 제공하는 서비스들을 System call을 통해 호출한다.
  - == API : Application Programming Interface
  - read, write, open 등 C의 함수들이 예시
    ![스크린샷 2022-05-14 오전 4 01 09](https://user-images.githubusercontent.com/76278794/168366758-190a9153-ad38-4eb5-8169-46616468e490.png)
    - 시스템콜을 하면 위와같은 절차를 걸쳐야하는데, 매번 이 과정을 걸쳐서 시스템콜을 사용하는 건 비효율적임.
    - 그래서 라이브러리를 사용하게된다.
      ![스크린샷 2022-05-14 오전 4 04 07](https://user-images.githubusercontent.com/76278794/168371618-10b931f5-615f-4609-86df-6c3ad037c170.png)
      표준 C 라이브러리를 사용하면 라이브러리 안에서 시스템콜을 처리해서 결과를 알려준다.
  

<br>
<br>

## 프로세스의 이해

### 프로세스의 정의
  - 실행중인 프로그램을 의미한다.
  - OS에서 작업단위이다.
  - 프로세스는 각각 작업을 하기위해 자원이 필요하다.
    - CPU time
    - memory
    - files
    - I/O devices

<br>

### 메모리의 구조
  - Text
    - code
  - Data
    - Global, static var ...
  - Stack
    - parameters, local var ...
  - Heap
    - malloc
  
  ![스크린샷 2022-05-14 오전 4 09 37](https://user-images.githubusercontent.com/76278794/168373922-9ea6c485-5185-4e20-90d0-2474780d2a54.png)

<br>

### Process state
  - New : 프로세스가 막 생성됨
  - Running : 프로세스가 CPU를 점유하고 실행되는 중
  - Waiting : 프로세스가 이벤트를 기다림
    - I/O 완료나 signal의 발생을 기다린다.
  - Ready : 프로세스가 프로세서에 할당되기까지 기다림.
  - Terminated : 실행완료
  <img width="635" alt="스크린샷 2022-05-14 오전 4 15 33" src="https://user-images.githubusercontent.com/76278794/168374691-53ec47bf-205a-43bb-99fa-5e36a3f611fd.png">

<br>

- PCB (Process Control Block)

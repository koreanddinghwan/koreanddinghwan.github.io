---
title: "[Database] 5. 관계형 데이터모델과 관계형데이터베이스 제약"
excerpt: "데이터베이스"

categories:
  - database
tags:
  - database
  - Relational data model
  - Relational Database Constraints


toc: true
toc_sticky: true

date: 2022-10-05
last_modified_at: 2022-10-07
---

# Relational Model Concepts

ERD로 작성한 개념적 모델을 관계형 모델로 매핑한다.  

## Domain, Attribute, Tuple, Relation

### Domain

- 정의 : `분리 불가능`한 atomic value의 집합
- 정의 방법
  1. `name` : domain의 이름
  2. `data type` : 데이터 형
  3. `format` : 데이터 포맷
  4. `additional information` : 단위

<br>

### Relation Schema

- `Relation Schema R`
  - relation의 구조를 의미한다.

- R(A1, A2, ... An)
  - `R` : relation의 이름
  - `Ai` : relation을 구성하는 attribute의 이름
  - `dom(Ai)` : domain of Ai, Ai attibute의 domain
  - `degree of relation` : attribute의 개수

- STUDENT의 relation schema
  - STUDENT(Name, SSN, HomePhone, Address, OfficePhone, Age, GPA)
  - relation name : STUDENT
  - degree : 7
  - dom(Name) : 학생이름 집합
  - dom(SSN) : 주민번호 집합
  - `dom(HomePhone) : 전화번호집합`
  - `dom(OfficePhone) : 전화번호집합`

- `!HomePhone, OfficePhone`
  - `동일 Domain, 다른 role`

<br>

### Relation

- relation : `r(R)`
  - `relation schema R(A1, A2, ... An)의 relation, relation instance`
  - `r = {t1, t2, ... tn}`
    - n개의 tuple(row, record)의 집합
  - `t = <v1, v2, ... vn>`
    - v1은 dom(A1), v2는 dom(A2)...에 속한다.

- `relation intension`
  - Relation Schema R

- `relation extension`
  - Relation `Instance` r(R)
  - `r(R`


- degree n의 relation instance r(R)의 수학적 표현
  - `r(R) ⊂ |dom(A1)| x |dom(A2)| x ... x |dom(An)|`
  - |dom(A1)| : domain(A1)에서 유효한 값의 개수
  - r(R)은 모든 attribute domain cardinality의 cartesian product의 부분집합.

- `current relation state`
  - 특정 시간의 relation state를 의미
  - miniworld의 특정 상태를 나타내는 `유효한 tuple`의 모임
  - relation : dynamic, 계속 상태가 바뀐다.
  - relation schema : almost static, 매우 가끔 바뀐다.

<br>
<br>

## Relation 특성

### Ordering of Tuples

- relation (instance)는 tuple의 `집합`이므로, `수학적으로는 순서가 존재하지 않는다.`
- `file 단계`에서는 `물리적 순서`가 존재한다.

### Ordering of values within a tuple

- n-tuple은 n개의 값의 순서있는 리스트이다. 
- 하지만, attribute와 value간 관련성이 유지되는 한, 순서는 중요치 않다.

### Interpretation of relation

- relation은 fact와 relationship의 통합된 표현이다.
  - 몇몇 relation은 entity에 대한 사실을,
  - 몇몇 relation은 relationshup을 표현한다.

- relation schema는 주장, 혹은 선언으로 해석될 수 있다.
  - relation의 tuple은 사실, 혹은 주장의 사례로 해석될 수 있다.


<br>
<br>

## relational model notation

- n degree의 relation schema R
  - `R(A1, A2, ..., An)`

- relation instance r(R)의 n-tuple t
  - `t = <v1, v2, v3, ..., vn>`
  - vi는 attribute Ai에 대응되어 dom(Ai)에 속한다.

- t의 Ai 속성값
  - `t[Ai] = t.Ai = t의 vi 값`
  - 여러개(`subtuple`) 가져올수도 있다.
  - `t[Au, Aw, ... , Az], t.(Au, Aw, ... , Az) = <vu, vw, ..., vz>`

###  example

`t = <’Barbara Benson’, ‘533-69-1238’, ‘(817)839-8461’, ‘7384 Fontana Lane’, NULL, 19, 3.25>`

- `t[Name] = <‘Barbara Benson’>`
- `t[Ssn, Gpa, Age] = <‘533-69-1238’, 3.25, 19>`


<br>
<br>

# Relational Model Constraints and Relational Database Schemas

## Domain Constraint

- 정의 : 각 tuple에서 각 attribute A의 value는 dom(A)의 atomic value여야한다는 것이다.
- 이미, name, type, format, additional information 에 대해 이야기를 나누었다.

<br>

## Key Constraint

- relation -> tuple의 집합 -> 집합은 중복되는 값이 없어야한다.

### Superkey

- 정의 : `tuple을 구분할 수 있는 속성의 부분집합`
  - 모든 relation은 최소 1개 이상의 Superkey를 가진다.
  - superiority key의 약자.

- 하지만 Superkey는 `유일성은 만족하나 최소성을 만족하지는 못한다.`
  - 튜플을 유일하게 식별할 수는 있으나, 유일성을 만족하면서도 속성을 더 제거할 수 있다.
  - 따라서 더 중요한 개념은 `Key`의 개념이다.

<br>

### Key

- `superkey 중, attribute를 하나라도 제거하면 더이상 superkey가 되지못하는(tuple을 구분하지 못하는) key`이다.
- key는 2가지 속성을 가진다.
  - `유일성` : superkey도 만족하는 속성, tuple을 구분할 수 있는 속성
  - `최소성` : minimal superkey, superkey 중에서 attribute를 더 삭제하면 유일성이 깨지는(superkey를 만족하지 못하는) 속성이다.

- `따라서, key는 superkey이지만, superkey는 key가 아닐수도 있다.  `

<br>

- `time-invariant`
  - schema의 valid 모든 valid state에서 항상 유지되어야한다.
  - relation에 새로운 tuple을 삽입해도 계속 key 속성을 유지해야한다.

<br>

### Candidate Key, Primary Key

- Candidate Key : relation에서 존재하는 각 Key를 의미.
- Primary Key : DB Designer에 의해 Candidate Key 중 선택된 Key
  - `단순 속성(simple attribute)`또는 적은 수의 `composite attribute`를 선택한다.

<br>

## Relational Databases and Relational Database Schemas

### 정의

- Relational Database
- Relatioanl Database Schema
- Relatioanl Database Instance


<br>
<br>

## Relational Database와 Relational Database Schema

## Enitty Integrity, Referential Integrity

## Foreign Key


# Update Operation, Transaction, Constraint violation


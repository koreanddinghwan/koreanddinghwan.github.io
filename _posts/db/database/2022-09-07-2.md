---
title: "[Database Management] 데이터베이스 개념과 관계형 데이터 모델"
excerpt: "데이터베이스 개념"

categories:
  - database
tags:
  - database system
  - DBMS



toc: true
toc_sticky: true

date: 2022-09-07
last_modified_at: 2022-09-07
---

# 데이터베이스 개념

## 데이터 관리 방식

- 섬의 개념(파일 처리 방식)
	- 고립(데이터간 소통 불가)
	- 접근제한
	- 상이한 환경
	- 비구조적(비표준화)된 데이터

<br>

- 분자 구조의 개념(데이터베이스 방식)
	- 연결(모든 데이터가 서로 연결되어있음)
	- 계획적/효율적 구조
	- 표준화된 데이터

<br>

## 기존 데이터 처리 방식의 문제점

<img width="686" alt="스크린샷 2022-09-03 오후 12 04 29" src="https://user-images.githubusercontent.com/76278794/188253461-df783e8b-9c9d-4cb4-9efa-f417f0c672f6.png">

- 응용프로그램을 만들때마다 필요한 파일을 정의하고, 구현한다.
	- 데이터가 중복되고, 불일치한다.
	- 통합 정보 취득의 어려움
	- 표준화가 되어있지 않아서 유연하지 못하다.
	- 프로그래머 생산성 저하
	- 과다한 프로그램 유지보수
	- ex) Y2K 
		- 2000년대 이전에 주민번호 저장방식은 연도를 뒷 2자리만 저장하는 방식이었다.
		- 2000년대가 지나가자, 이런 방식으로 설계된 모든 프로그램을 수정해야했다.

<br>
<br>

## 데이터베이스 방식

<img width="781" alt="스크린샷 2022-09-03 오후 12 07 40" src="https://user-images.githubusercontent.com/76278794/188253584-b1189679-f59e-4fb0-8686-e6b2dd2a4271.png">

- ⭐️`정의` : `여러 사용자의 정보욕구 충족`을 위해, 서로 `관련있는 데이터`를 `최소한의 중복`으로 `통합`.
- 특성
	- 통합
	- 공용
- 장점
	- 데이터의 중복통제(Redundancy), 일관성유지
	- 데이터 취득 용이, 응답 시간 단축
	- 계획 및 표준화
	- 프로그래머 생산성 향상
	- 일관성 있는 데이터 관리

-  비용
	- 고정비(H/W, S/W, 교육비)
	- 예비파일, 복구대책(통합되어있어서 DB1개의 문제가 전체의 문제가 된다.)
	- 철저한 오류 검사 필요

- 구성요소
	- 데이터
		- `data` : 있는 그대로의 사실
		- `정보` : 의사결정에 도움을 줄 수 있는 가공된 데이터
	- 하드웨어
	- 소프트웨어
		- DBMS
	- 사용자
		- 데이터 관리인
		- 데이터베이스 관리인(DBA)
		- 어플리케이션 개발자
		- 최종 사용자


<br>
<br>

## 데이터베이스 발전사

### 1세대

1. GUAM(generalized update access method)
	- 1960아폴로 우주선 프로젝트

2. IMS
	- 60년대 중반, IBM의 트리구조 계층형 DB
	- 물리적 구조를 통해 대용량 데이터 빠른처리

3. IDS
	- 60년대 중반 GE의 그물형 데이터베이스
	- 계층형보다 복잡한 데이터 관계 표현한다.


4. DBTG 결성
	- 1971 CODASYL(COnference on DAata SYstems Languages)의 Data Base Task Group
	- 데이테베이스의 표준을 제시한다.


5. System R
	- 70년대 codd의 논문에 근거한 시스템
	- IBM의 최초의 RDBMS prototype이다.
	- Structured English Query Language(SEQUEL)이며, 현재 SQL의 시초가 된다.
	- IBM은 이후 개발을 포기했으나, oracle이 상업용으로 만드는데에 성공한다(SQL)

### 2세대 관계형 데이터베이스

- 장점 : 숫자와 문자정보 저장에 적합
- 단점 : 여러 Version을 가진 정보와 멀티미디어 데이터 저장이 불편함


### 3세대 객체중심 데이터베이스

- 관계형 데이터베이스의 한계를 극복하기 위해 나타난 데이터베이스
- 테이블, 행, 사용자 정의 데이터 타입등을 클래스, 객체, 타입, 메소드 등으로 나타낸다.

### 4세대 NOSQL 데이터베이스

- RDBMS에서 느린 JOIN의 연산속도를 보완한 데이터베이스
- key-value 데이터베이스
- document 데이터베이스
- column-oriente 데이터베이스
- graph 데이터베이스



<br>
<br>

## 데이터 모델

- 정의 : 현실세계의 복잡한 객체와 관계 중, `조직의 정보욕구 충족`을 위해 `필요한 부분만 간략히 표현`
- 실제 사용자가 참여해서 DB를 구축해야 유용한 DB가 된다.
- 유형
	- 상위 데이터 모델
		- (사용자에 가까움)
		- Ex)ERD(entity relationship diagram), UML Class Diagram
	- 실행 데이터 모델
		- 상업용 DBMS가 채택하고있다.
		- Ex)관계형, 계층형, 그물형, 객체중심, NOSQL
	- 하위 데이터 모델
		- (컴퓨터에 가까움))
		- Ex)저장방식(index, format)

<br>
<br>

### 삼단계 스키마 구조(ANSI/SPARC 구조)

<img src="https://user-images.githubusercontent.com/76278794/188865905-a5f02e62-a91b-4326-aba4-81a6ae730a5e.jpg">

- 삼단계 구조
	1. 외부단계(관점단계)
		- `여러개의 사용자 관점`으로 이뤄진다.
	2. 개념단계
		- 여러 사용자 관점을 통합한 `전체 데이터베이스의 관점`
	3. 내부단계
		- 하드웨어에 저장되는 데이터베이스의 물리적 구조 기술

<br>

- 데이터 독립성
	1. 논리적 데이터 독립성
		- `전체 데이터베이스의 논리적 구조(개념단계)가 바뀌더라도 각 사용자나 응용프로그램의 데이터관점(외부단계)가 바뀌지 않는다.`

	2. 물리적 독립성
		- `데이터베이스의 물리적 구조(내부단계)가 바뀌더라도 전체 데이터베이스를 향한 관점(개념단계)는 바뀌지 않는다.`

<br>

## 데이터베이스 관리 시스템

<img width="781" alt="스크린샷 2022-09-03 오후 12 07 40" src="https://user-images.githubusercontent.com/76278794/188253584-b1189679-f59e-4fb0-8686-e6b2dd2a4271.png">

- 정의
	- 데이터베이스의 `조직, 접근, 통제`를 위한 기능을 제공하는 일반 목적용 소프트웨어
- 기능
	- 데이터의 저장, 검색, 갱신
	- 데이터 사전/주소록(시스템목록기)
	- 트랜잭션과 데이터 무결성
	- 병행 제어
	- 로그를 통한 예비파일 생성, 복구
	- 보안
	- 통신
	- 기타 편의 장치

<br>

### 유형

1. `데이터베이스 관리시스템 엔진`

	- 사용자의 응용프로그램으로부터 논리적 요구를 입력받고, 실제 물리적 데이터베이스 파일에 실행한다.

	```sql
	UPDATE 공급자
	SET    위치='서울'
	WHERE  공급자번호=16;
	```

	위와같은 사용자의 요구를 입력받아서 실행하기위해서는

	1. 공급자 레코드의 시스템 목록 위치 파악
	2. 시스템 목록의 열람
	3. 16공급자번호의 물리적 저장위치 파악
	4. 16번 공급자의 레코드가 위치한 2차 저장장치의 블럭을 메모리로 읽는다.
	5. 위치를 서울로 변경
	6. 변경된 레코드를 2차 저장장치로 재기록
	7. 관련 시스템목록, 색인, 일지 수정
	<br>

2. `사용자 접속장치`
	- 사용자가 DBMS를 접근하는 수단
	- 표준 질의어는 `SQL`이다.
	- 그래픽 방식에서(GUI)에서는 QBE가 사용된다.
	<br>

3. `데이터베이스 정의/조작기`
	- 데이터베이스 구조 정의
	- 데이터 저장,검색,갱신위한 도구
	<br>

4. `시스템 목록기`
	- `메타데이터`를 관리한다
		- 데이터의 의미, 무결성 제약, 접근 권한 등을 정의
	- 시스템 목록 : `DBMS내장` 프로그램
	- 유의어
		- `데이터 사전` : `DBMS와 독립`된 프로그램
		- `정보 저장고`
			- 데이터 사전과 동일하지만 의미만 확장한 용어
			- 조직 전체의 메타데이터 관리(하드웨어, 소프트웨어, 개발 프로젝트, 사용자 등)
	<br>

5. `무결성 관리기`
	- `트랜잭션 무결성`
		- 논리적 트랜젝션 : A가 B에게 10만원 이체
		- 물리적 트랜젝션 : A계좌를 10만원 줄이고, B계좌의 잔고 10만원 증가
		- 하나의 논리적 트랜젝션을 완료하기위해선 여러 물리적 트랜잭션이 수행되어야한다.
		- 물리적 트랜잭션 도중, 시스템이 고장나면, 이전 상태로 복구하고, 에러메세지를 띄우는 `트랜잭션 무결성`을 보장해줘야한다.

	- `데이터 무결성`
		- 영역 무결성 : 입력 값이 속성이 지닐 수 있는 데이터 영역 벗어나지 않게한다.
		- 참조 무결성 : 데이터베이스 내부에 존재하는 값으로만 참조해야한다.
		- 사업관련 무결성 : 사업방침을 위한 무결성. (사원-대리-과장의 월급 구분)
	<br>

6. `성능 관리기`
	- 질의 최적화기능
		- 사용자 질의의 형태에 상관없이 최적의 성능 보장

	- 데이터베이스 사용도 감시기능
		- 데이터베이스 사용과 관련한 통계수집
		- 통계자료 토대로 DBA가 성능개선

	<br>

7. `병행 제어기`
	- 동시 갱신으로인한 데이터베이스 오류를 방지한다.
	- 판독전용(read-only)트랜젝션의 경우, 데이터의 변화가 없으므로 상관없으나, `갱신하는 경우`에는 병행제어기의 역할이 중요하다.
	- 부품의 재고량을 변화시키는 것과 같은 트랜젝션은 결과를 보장하기위해선 `한 트랜젝션이 끝나기전까진 다른 트랜젝션을 수행해서는 안된다.`
	- 병행제어기는 이러한 데이터의 접근의 순서를 보장한다.

	<br>

8. `예비/복구 관리기`

	- 사용자의 실수, HW파괴, 오류 등으로인한 DB손상 방지
	- backup 파일 생성, log 장치 등
	<br>

9. `보안 관리기`
	- 데이터 손실, 파괴, 도용으로부터 DB보호장치
	- 권한 지정, 암호화
	<br>

10. `기타 편의 장치`
	- 화면 작성기, 보고서 작성기, 응용프로그램 생성, 파일 전출입기 등



<br>
<br>


# 관계형 데이터 모델

## 구조

<img width="610" alt="스크린샷 2022-09-08 오후 7 37 57" src="https://user-images.githubusercontent.com/76278794/189101801-291517b7-3093-49cc-80f8-b025b85a9121.png">


- `관계(Table)`
	- 관계형 데이터 모델의 기본 데이터구조

- `테이블의 특성`
	- `각 열은 동일한 속성값`을 가진다.
	- 각 셀 값은 `단일값`이다.(unique의 개념이 아니다)
	- 각 열은 `속성` 이름(attribute)를 가진다.
	- `식별자 속성(primary key)`는 `유일`값(unique)해야한다.
	- 각 열과 행의 `순서는 중요하지 않다`.

- `튜플, 속성, 영역`
	- `차수(degree)` : 관계의 `속성 수`
	- `원소 수` : 튜플의 개수
	- `영역` : 속성값의 범위

- 용어 정리
	- relation == table == file
	- tuple == row == record
	- attribute == column == field

<br>
<br>


## 제약

### 개체 무결성 제약

- 개체(entity)의 데이터에 오류가 없어야한다.
- 개체 무결정 제약에는 2가지 종류가 있다.
	1. tuple의 비중복제약(주키 제약)
		- 조건
			- `유일성` : 튜플을 유일하게 구별할 수 있다.(주키 1개에 1개의 튜플이 선택된다.)
			- `최소성` : 합성키일때, 유일성을 만족하면서 다른 키를 삭제할수 없다.(유일성을 만족하는 최소한의 키를 사용했는가?)
		- 선정
			- 길이, 편의성, 변화가능성, 미래의 유일성 보장
		- 특성
			- 주키는 관계스키마에서 밑줄로 구분된다.
			- `합성키의 항목은 NULL값을 가질 수 없다.`
			- `후보키` : 주키의 조건을 만족하는 키들의 집합
			- `대리키` : 후보키 - 주키(주키를 대리할 수 있는 키의 집합)
		
	2. cell의 단일값 제약
		- 1개의 셀에는 1개의 데이터만 저장되어야한다.

<br>

### 영역 제약

- `속성값의 범위`에 대한 제약
- `데이터 틀` : 연/월/일, 시간 등 표준화된 데이터의 경우에 더욱 유용하다.

<br>

### 참조 무결성 제약

- `tuple간의 일관성` 유지 제약

- 용어
	- `외래키` : 현재 table에서는 주키가 아니지만, 다른 table에서는 주키인 항목
	- `교차참조키` : 현재 table과 다른 table 모두에서 주키인 항목
		- `외래키의 경우에는 NULL값을 가질 수 있으나, 교차참조키는 NULL값을 가져서는 안된다`

- 특정 tuple의 존재가 다른 tuple의 존재에 대해 오류를 발생시켜서는 안된다.
- `데이터 조작시 발생가능한 참조 무결성 제약 위반`
	- `삽입`
		- 존재하지 않는 외래키를 가진 tuple의 삽입시 대책
		1. 삽입금지
		2. NULL값 대체(교차 참조키일때는 불가능)

	- `삭제, 수정`
		- tuple을 삭제(수정)함에따라 해당 tuple의 주키를 FK로 가지는 테이블에서 참조무결성오류 발생 시,
		1. 삭제(수정)금지
		2. NULL값 대체
		3. `참조삭제`

<br>
<br>

## 정의와 조작

### 관계대수어
### 관계해석어
---
title: "[Database] 2.데이터베이스 시스템의 개념, 아키텍처"
excerpt: "데이터베이스"

categories:
  - database
tags:
  - database
  - DB system


toc: true
toc_sticky: true

date: 2022-09-12
last_modified_at: 2022-09-12
---

# Data Model, Schemas, Instances, States

- DB접근방식은 DB유저들에게 필요없는 세부적인 정보를 추상화의 단계를 통해 숨긴다.
- 다양한 용어가 나오니, 이에 대해 숙지해야한다.


## Data Model

### 정의

- 데이터베이스 구조(structure of database) : `데이터 형, 관계, 데이터의 제약조건` 정의
- `Data Model` : `collection of concepts for describing data`
    - 데이터베이스 구조 + basic operation
        - `basic operation` : `user-defined operation` + `generic operation`
            - user-defined operation : 학생의 GPA를 구해라 등
            - generic operation : insert, delete, modify, retrieve 등

### 분류

- `개념적 데이터 모델(high-level, conceptual data model)`
    - 사용자가 이해하는 데이터베이스 구조
    - miniworld를 개체, 속성, 관계로 표현한다.
    - DB 설계자(designer)가 사용자와 인터뷰, 문서화한다.

- `물리적 데이터 모델(low-level, physical data model)`
    - 컴퓨터에 가까운 형태, 디스크, 파일 레벨에서 데이터를 바라본다.
    - 데이터 저장방법, 레코드 포맷/순서, 레코드 찾아가는 포인터 구조 등에 대해 다른다.

- `구현 데이터 모델(representational, implementation data model)`
    - DBMS가 사용하는 모델
    - 개념적과 물리적의 사이에 존재
        - 사용자가 이해할 수 있고, 컴퓨터가 데이터를 구성하는 방식과 비슷하기때문.
    - 물리적인 저장방식은 추상화하지만, 컴퓨터에 바로 구현될 수 있는 모델임

- 오늘날에는 구현 데이터 모델은 relational data model이 가장 많이 사용된다.
    - 레코드와 필드를 가진 테이블간의 관계로 데이터를 표현한다.
    - 모든 테이블은 필드를 묘사하는 스키마를 가진다.(테이블의 1행, 가장 윗줄을 의미한다.)

<br>

## DB Schema(meta-data)

- data model은 DB를 묘사하는 부분과 Date자체로 나뉘는데,`DB를 묘사하는 DB schema`를 알아야한다.

- DB스키마는 오늘날 사용되는 관계형 데이터 모델의 relation을 의미한다.

### 정의

- `DB schema : 실제 저장데이터가 아닌, 데이터베이스에 대한 설명`

- DB설계자가 설계시 정의, 지주 변경되지 않음.
- `system catalog`에 저장된다.
- `형태, 관계, 제약` 등에 대해 정의.


### schema diagram

- 스키마를 표현하는 그림
- 제한된 정보를 표현한다.`(형태, 관계, 제약을 표현하지 않는다.)`
<img width="300" alt="Screen Shot 2022-09-12 at 12 06 45 PM" src="https://user-images.githubusercontent.com/76278794/189566649-66d96b1f-bbb1-4e83-8a36-5114436822d9.png">

<br>

## DB State와 Instance

### 정의

- `Instance` : 저장된 데이터 자체
- `DB State` : `특정 시점`의 DB안의 데이터를 의미.
    - 또는, 데이터베이스의 `현재 occurence, instance들의 집합`이라고도 한다.
    - DB내부의 실제 데이터들은 insert, delete등에 의해 바뀔때마다 다른 state를 가지게된다.
    - 이는 곧, 각 state마다 스키마 구조는 자신만의 현재 instance 집합을 가진다는 것을 의미한다.

### DB스키마, DB state구분

- 새로운 DB를 정의할때, DBMS에 DB스키마를 정의하게된다.
- 이때, 상응하는 `DB state는 empty state`를 가진다.
- 이후에 DB의 데이터를 조작할때마다 다른 DB state를 가지게된다.

### DBMS validation

- `DBMS는 모든 state가 valid state`인지 검사한다.
- DB를 조작해 state가 변이하면, system catalog에 저장되어있는 DB 스키마와 비교해 valid한지 검증한다.

<br>
<br>

# 3단계 스키마 구조

<img width="500" alt="Screen Shot 2022-09-12 at 12 23 15 PM" src="https://user-images.githubusercontent.com/76278794/189568180-f3c52a1b-8dc9-4ad9-8e3c-a8d96618e567.png">

- 3단계 스키마 구조는 `사용자 응용프로그램과 물리적 데이터베이스를 구분하기위함`이다.
- 사용자는 응용프로그램

## 구조

### ⭐️내부 단계

- 내부 스키마로 물리적 저장 구조 기술
- `물리적 데이터 모델`을 사용한다.

### ⭐️개념적 단계

- 개념적 스키마로 데이터베이스의 구조를 기술하고, 물리적 저장구조는 숨긴다.
- entities, types, constraints, relationships, operations 등
- `개넘적 데이터 모델(ER 모델)` `구현 데이터 모델`을 사용한다.

### ⭐️외부 단계(View Level)

- 여러개의 외부 스키마와 사용자 view들로 표현한다.
- 사용자 그룹가 관심으로하는 정보만을 기술하고, 나머지 부분은 숨긴다..
- `개넘적 데이터 모델(ER 모델)` `구현 데이터 모델`을 사용한다.

## Data Independence

### ⭐️논리적 데이터 독립성

- `개념적 스키마를 변경하더라도, 윗단계인 외부 스키마, 응용프로그램에는 영향을 주지 않는 특성`
- 핸드폰 번호에 대한 스키마가 추가된다고 해도, 기존 응용 프로그램은 해당 정보 없이도 사용할 수 있다.
- 또한, 특정 스키마가 삭제되었을때는, 해당 스키마를 사용하는 외부 스키마를 제외하고는 영향을 받지 않는다.
- `이는 모두 논리적 데이터 독립성을 지원하는 DBMS애서는 view정의와 mapping만이 바뀌기 때문이다.`


### ⭐️물리적 데이터 독립성

- `내부 스키마를 변경하더라도, 윗단계인 외부 스키마와 개념적 스키마에는 영향을 주지않는 특성`
- 저장 장치를 추가해 기존 데이터를 옮긴다고 하더라도, 내부 스키마와 개념적 스키마 사이의 mapping만을 수정하므로, 개념적 스키마와 외부 스키마에는 아무런 영향이 없다.

<br>

## ⭐️mapping

- ⭐️`데이터 독립성(data independence)를 가능하게 해준다.`
- 예시
    - 각 유저는 자신이 볼 수 있는 view(외부 스키마)만을 참조할 수 있다.(외부단계 참고)
        - request
            - 따라서 외부스키마에서 지정된 요청은 내부스키마의 요청으로 `변환`되어야한다.
        - result
            - 만약 데이터를 받는 요청이라면 데이터를 저장공간에서 가져와서 사용자의 외부 관점에 맞게 결과를 형식을 재지정해줘야한다.
- 단계 사이에서 발생하는 이런 변환을 ⭐️`mapping`이라고 한다.
- 외부 단계와 개념적 단계 사이의 매핑을 ⭐️`external/conceptual mapping`, 개념적 단계외 내부단계 사이의 매핑을 ⭐️`conceptual/internal mapping`이라고 한다.

- multiple-level DBMS에서, system catalog는 다양한 단계 사이에서 들어오는 요청들을 mapping하게된다.
- DBMS는 이런 mapping을 하기위해 추가적인 소프트웨어를 사용한다.
- ⭐️`만약 특정 단계에서 스키마가 변경되어도, 윗 단계의 스키마는 변경되지 않는 이유가 두 단계 사이의 mapping만 변경되면 되기때문이다.`

<br>
<br>

# DBMS언어, 인터페이스


---
title: "[C++] C++의 형변환"
excerpt: "C++에서 형변환"

categories:
  - cpp
tags:
  - cpp
  - syntax

toc: true
toc_sticky: true

date: 2022-07-22
last_modified_at: 2022-07-22
---

<br>
<br>

REF : 윤성우의 열혈 C++

## C++의 형변환 연산

- C++에선 기존 C스타일의 형변환을 Old C-style 이라고 부른다, 단순히 호환성을 위해 존재한다.
- 기존 C스타일의 형변환은 `형변환의 목적을 한 눈에 알아볼 수 없다.`는 문제점이 존재한다.
- 코드를 읽는사람으로 하여금 해당 형변환이 어떤 의도로 된것인지 쉽게 예측할 수 없기때문에 그렇다.
- 이러한 논란과 문제점으로 인해 C++만의 형변환 연산자가 추가되었다.
- C++만의 형변환 연산자와 규칙을 알아보자.

### 1. dynamic_cast

- 상속관계에서의 안전한 형 변환을 지원한다.
- `유도클래스의 포인터와 참조형 데이터`를 `기초 클래스의 포인터 및 참조형 데이터로` 형변환하는 경우(업캐스팅)
  ```cpp
  #include <iostream>
  using namespace std;

  class Base
  {
    public:
      void VFnc(void)
      {
        cout<<"This is Base"<<endl;
      }
  };

  class Derived : public Base
  {
    public:
      void VFnc(void)
      {
        cout<<"This is Derived!"<<endl;
      }
  };

  int main(void)
  {
    Derived *ptr2 = new Derived;

    /*dynamic_cast upcasting*/
    Base *base1 = dynamic_cast<Base *>(ptr2);
  }
  ```

- `기초 클래스가 Polymorphic 클래스(가상함수가 있는 클래스)`일때, `유도클래스의 포인터 및 참조형 데이터로` 변환(다운캐스팅)
  ```cpp
  class Base
  {
    public:
      virtual void VFnc(void)
      {
        cout<<"This is Base"<<endl;
      }
  };

  class Derived : public Base
  {
    public:
      void VFnc(void)
      {
        cout<<"This is Derived!"<<endl;
      }
  };

  int main(void)
  {
    Base *ptr1 = new Derived;
    
    /*dynamic_cast downcasting*/
    Derived *derive1 = dynamic_cast<Derived *>(ptr1);
  }
  ```
  - Base클래스가 가상함수를 지닌 `Polymorphic 클래스`이므로, Derived 클래스도 `Polymorphic`이다.

<br>


### 2. static_cast

- 아무런 조건없이, 업캐스팅과 다운캐스팅을 하게끔 해준다. 란
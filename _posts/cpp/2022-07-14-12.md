---
title: "[C++] 상속"
excerpt: "상속에 대한 이해"

categories:
  - cpp
tags:
  - cpp
  - syntax

toc: true
toc_sticky: true

date: 2022-07-14
last_modified_at: 2022-07-14
---

<br>
<br>

REF : 윤성우의 열혈 C++



# 상속 기초

- C++의 상속은 단어 그대로 물려받는다는 의미가 강하지만, 단순히 기존 클래스를 재활용하는 목적의 기능이 아니다.
- 상속을 적절히 이용하면 프로그램의 유연성과 확장성을 확보할 수 있다.

- A라는 클래스가 B라는 클래스를 상속한다.
  - A는 B클래스의 모든 멤버를 가진 상태로, 자신의 멤버도 가지게된다.
  - 따라서 `B클래스의 생성자`로 B클래스 멤버를 초기화해야한다.

```cpp

class B
{
  private:
    int num;
  public:
    B(int num) : num(num)
    {}

};

class A : public B
{
  private:
    int A_Num;
  public:
    A(int a, int b) : B(b), A_Num(a)
    {}
};
```

<br>

### 유도(자식) 클래스의 객체생성과정

- 유도클래스의 객체 생성과정에서 기초 클래스의 생성자도 호출된다.
  1. 유도클래스의 생성자가 호출.
  2. 기초 클래스의 생성자 호출을 위해 이니셜라이저를 확인.
    - 이때, 이니셜라이저에 기초클래스의 생성자를 명시하지 않으면 void 생성자가 호출된다.
    - 있으면 해당 기초클래스 생성자 호출
  3. 유도클래스의 멤버 초기화 후, 유도클래스 생성자 실행 완료.

<br>

### 유도(자식) 클래스의 객체소멸과정

- 생성순서와 소멸순서는 반대이다.
- 소멸과정에서도 똑같이 유도클래스의 소멸자와 기초클래스의 소멸자 모두 호출된다.
  1. 유도클래스의 소멸자 호출, 실행.
  2. 기초 클래스의 소멸자 호출, 실행.
  - 따라서, 각 클래스의 생성자에서 동적할당한 메모리는 각 클래스의 소멸자에서 해제해야한다.

<br><br>

## protected선언과 세가지 형태의 상속

### protect로 선언된 멤버

접근제어 지시자 중, `public`, `private`는 계속 써왔는데, `protected`는 이제야 공부한다.  

- 이 세 가지 접근제어 지시자가 허용하는 접근범위는  
  ```
  public > protected > private
  ```

- protected 멤버변수는 `상속`시에 private와 차이를 나타낸다.  
  - protected 멤버변수: `해당 클래스를 상속하는 유도 클래스에서 접근 가능`
  - private는 클래스 외부에선 접근이 불가능하나,
  - protected는 유도클래스에게만 제한적으로 접근을 허용한다.

<br>

### 상속의 3가지 형태

1. protected 상속
  - protected보다 접근 허용 범위가 넓은 멤버(public)는 protected로 변환해 상속해
    - 클래스 외부에서 접근하지 못하도록 한다.

    ```cpp
    class A
    {
      private:
        int n1;
      protected:
        int n2;
      public:
        int n3;
    };
    
    class B : protected A
    {
      /*.
        int n1 <- A의 private이므로 B에서 접근불가.
        int n2 <- protected
        int n3 <- protected
        ..*/
    };
    int main(void)
    {
      B b;

      b.n3 //<-에러 발생
    }
    ```

<br>

2. private 상속
  - private 접근 허용 범위가 넓은 멤버(public, protected)는 private로 변환해 상속해
    - 클래스 외부에서 접근하지 못하도록 한다.

    ```cpp
    class A
    {
      private:
        int n1;
      protected:
        int n2;
      public:
        int n3;
    };
    
    class B : private A
    {
      /*.
        int n1 <- A의 private이므로 B에서 접근불가.
        int n2 <- private
        int n3 <- private
        ..*/
    };
    int main(void)
    {
      B b;

      b.n3 //<-에러 발생
    }
    ```

    - private 상속을 한 클래스를 다시 private상속하면, 모든 멤버변수가 접근불가 상태이므로 의미없는 상속이된다.

<br>

3. public 상속
  - private를 제외한 나머지를 그대로 상속한다.

<br><br>

## 상속조건

- 상속으로 클래스의 관계를 구성하기 위해서는 조건이 필요하다.
- IS_A 관계
  - 유도클래스는 기초클래스가 지니는 모든 것을 지니고, 유도클래스만의 추가적인 특성이 더해진다.
  - 예시
    - 사람 - 학생 : 학생은 is a 사람.  
    - 사람 - 남자 : 남자 is a 사람.
    
- HAS_A 관계
  - 소유관계도 상속으로 표현이 가능하다.
  - 하지만 이런 소유 관계는
    - 소유하지 않을때를 표현하는게 어렵고
    - 다른 클래스도 소유하기 시작하면 표현하기 어려워진다.(다중상속을 할 수 있지만 어려움)
  - 따라서, 소유관계는 상속으로 표현하기에 적합하지 않다.

<br><br>
    

# 다형성


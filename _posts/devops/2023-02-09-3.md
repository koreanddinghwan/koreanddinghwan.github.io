---
title:  "[AWS] EC2"
excerpt: "EC2"

categories:
  - devops
tags:
  - [ec2]
  


toc: true
toc_sticky: true

date: 2023-02-09
last_modified_at: 2023-02-09
---

[AWS 강의실](https://www.youtube.com/@AWSClassroom)

# 정의

AWC EC2는 안전, 크기 조정 가능한 컴퓨팅 파워를 클라우드에서 제공하는 웹서비스.

개발자가 더 쉽게 웹 규모의 클라우드 컴퓨팅 작업을 할 수 있도록 설계되었다.

컴퓨팅 파워를 빌려쓰는 서비스이다.

- 게임서버, 웹서버, 어플리케이션 서버 등을 호스팅한다.
- 데이터베이스, 머신러닝, 비트코인 채굴, 연구용 프로그램 등에 사용된다.
- 그래픽 렌더링, 게임 등에 사용된다.

<br><br>

# 특성

## 초단위 온디맨드 가격모델

온디맨드 모델에서는 가격이 초단위로 결정된다.

서비스 요금을 미리 약정하거나 선입금이 필요없다.

<br>

## 빠른 구축속도와 확장성

몇 분만에 인스턴스를 전세계에 수백여대 구축할 수 있다.

<br>

## 다양한 구성방법 지원

머신러닝, 웹서버, 게임서버, 이미지 처리 등 다양한 용도에 최적화된 서버 구성이 가능하다.

다양한 과금 모델을 사용할 수 있다.

<br>

## AWS연동

오토스케일링, ELB, CloudWatch등과 쉽게 연동된다.

<br>

# 구성요소

`인스턴스` : 클라우드에서 사용하는 가상 서버, CPU , 메모리, 그래픽카드 등 연산을 위한 하드웨어를 담당한다.

`EBS`: Elastic Block Storage의 줄임말, 클라우드에서 사용하는 가상디스크를 의미한다.

`AMI`: EC2 인스턴스 실행 정보를 담는 이미지

보안그룹 : 가상의 방화벽.

<br>

# 순서

1. AMI선택
2. EC2 유형, 사이즈 선택
3. EBS설정
4. 보안그룹 설정
    1. inbound에 HTTP 설정해둬야함
5. EC2 생성
6. EC2 접속 후, 웹 서버 설치 및 웹 서버 실행
7. 웹 브라우저에서 테스트

사용하고나선 중지/죵료시켜야한다.

중지시키면 EBS요금은 나간다.

<br><br>

---

# EC2의 가격모델

## 온디맨드

실행하는 인스턴스에 따라 시간 또는 초당 컴퓨팅 파워로 측정된 가격을 지불한다.

정기적인 수요예측이 힘들고/유연하게 EC2를 사용하고 싶을 때 사용한다.

<br>

## 예약 인스턴스

미리 돈을 내고 1~3년 약정해서 사용한다.

75%정도 저렴하다.

수요 예측이 확실할때 사용한다.

어느정도 기간의 약정이 가능한 사용자가 사용한다.

<br>

## 스팟 인스턴스

경매 형식으로 시장에 남는 인스턴스를 저렴하게 구매해서 사용한다.

90%까지 저렴하다.

다만, 더 높은 가격으로 입찰한 사용자가 있다면 그 사용자에게 반환한다.

시작/종료가 자유롭고 추가적인 컴퓨팅파워가 필요할때 사용한다.

<br>

## 전용호스트

테넌시 모델을 선택할 수 있는데, 인스턴스가 하나의 물리적인 서버에서 동시에 실행되며 서로 간섭이 생길수도 있음을 막기위해 전용 인스턴스라는 테넌시 옵션이 있다.

실제 물리적인 서버를 임대한다.

가상화된 서버 중 1개를 빌리는데, 이 서버들은 동일한 물리적 서버에 담겨있으므로 서로 간섭이 있을 수 있다.

보안적인 이슈, 라이선스 이슈, 규정에 따라 필요한 경우, CPU steal의 퍼포먼스 이슈를 방지하기위해 사용한다.

<br><br>

# 예시

쇼핑몰을 만든다고할때 

- 일상적인 요구사항은 예약 인스턴스로 사용
- 이벤트로 트래픽 급증 시, 온디맨드로 오토스케일링 기능 사용

<br>

# 가격순서

스팟 < 예약 < 온디맨드 < 전용호스트

EC2의 가격모델은 EBS와는 별도이다.

기타 데이터 통신 비용도 별도로 청구된다.

- AWS는 AWS바깥으로 나가는 트래픽에 대해서만 요금을 부과한다.
- AWS간의 통신은 비용이 잡히지 않는다.

---

<br><br>

# 유형과 크기

## 인스턴스 유형

인스턴스의 유형과 사이즈를 선택해야하며

 각 인스턴스별 사용 목적에 따라 달라질 수 있다.

- 타입별, 세대별로 숫자가 부여된다.
- 아키텍쳐 및 사용 기술에 따라 접두사가 붙는다.
    - t4g : t4 인스턴스 중 AWS Graviton 프로세서를 사용(g) = t4g

<br>

## 인스턴스 크기

인스턴스의 CPU 갯수, 메모리 크기, 성능 등으로 사이즈 결정

크기가 클수록

- 더 많은 메모리
- 더 많은 CPU
- 더 많은 네트워크 대역폭
- EBS와 통신가능한 대역폭(가상의 하드드라이브와의 통신)



